<!--
  KeyChecker page
  Last edited: 01/16/2026
  Last commit: Image raid
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KeyChecker &#x2014; Program Development in Java</title>
  <link rel="stylesheet" href="style/main.css" />
  <script>
    function checkAnswers() {
      let code1 = document.getElementById('test-question-code-1');
      let code2 = document.getElementById('test-question-code-2');
      let correctRadio = document.getElementById('test-question-check');
      let resultLabel = document.getElementById('test-question-result');
      let result = '';
      if (code1.value == 'KeyChecker kc = new KeyChecker();') {
        result = result.concat('Code #1 is correct; ');
      } else {
        result = result.concat('Code #1 is incorrect; ');
      }
      if (code2.value == 'frame.addKeyListener(kc);') {
        result = result.concat('Code #2 is correct; ');
      } else {
        result = result.concat('Code #2 is incorrect; ');
      }
      if (correctRadio.checked) {
        result = result.concat('and Radio is correct.');
      } else {
        result = result.concat('and Option #2 would be the correct answer.');
      }
      resultLabel.innerHTML = result;
    }
  </script>
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="index.html">Main Page</a></li>
        <li><a href="swing.html">Java's Swing Library</a></li>
        <li><a href="keychecker.html"><i>KeyChecker (key input system)</i></a></li>
        <li><a href="hitboxes.html">Hitboxes</a></li>
        <li><a href="rjlabels.html">Rotating Labels (by overriding graphic drawing methods)</a></li>
        <li><a href="directional-movement.html">Directional Movement</a></li>
        <li><a href="forms.html">Test Questions</a></li>
      </ul>
    </nav>
    <h1>Program Development in Java</h1>
    <h2>The KeyChecker Class</h2>
    <hr />
  </header>
  <main>
    <h3>Summary</h3>
    <p>
      <span class="code">KeyChecker</span> is meant to provide the programmer the ability to detect the user's
      keyboard inputs. <span class="code">KeyChecker</span> must be applied to a <span class="code">Container</span>
      to detect key inputs. The programmer can then check if a particular key is being pressed by the user to
      follow through with a block of code. The <span class="code">pressing(int)</span> method returns a boolean value
      to check if a key is being pressed. The <span class="code">int</span> argument put in this method is the
      returned value of <span class="code">KeyEvent</span>'s VK (Virtual Keyboard) static variables. The
      <span class="code">KeyChecker</span>'s key cache can also be cleared with its <span class="code">clear()</span>
      method in the case that the parenting <span class="code">Container</span> stops listening for key inputs.
    </p>
    <h3>KeyAdapter, KeyChecker's Superclass</h3>
    <p class="brief">
      <span class="code">java.awt.KeyAdapter</span> is the superclass of <span class="code">KeyChecker</span>.
      <span class="code">KeyAdapter</span>, or any AWT "adapter" at all, would implement its respective interface
      that is labelled as a "listener." For example, <span class="code">MouseAdapter</span> would implement
      <span class="code">MouseListener</span>. <span class="code">KeyAdapter</span> is an abstract class with
      various implemented abstract methods from <span class="code">KeyListener</span>. In fact,
      <span class="code">KeyAdapter</span> would be the class representation of <span class="code">KeyListener</span>.
      As is the case for any other "listener," <span class="code">KeyListener</span> extends
      <span class="code">java.util.EventListener</span> at some point.
    </p>
    <h3>Usage</h3>
    <p class="brief">
      <span class="code">KeyChecker</span> is a non-static class. That being said, you will need to create an object of
      it to use it.
    </p>
    <!-- 
      You can assign multiple classes to a single element by separating class names with spaces.
      In this example, the paragraph below is both brief and a code snippet.
    -->
    <p class="brief code">KeyChecker kc = new KeyChecker();</p>
    <p class="brief">
      Make sure you are assigning this object to a variable instead of weakly creating it. Once you have done this,
      apply this to a <span class="code">Container</span> of your choice, typically a <span class="code">JFrame</span>,
      with the <span class="code">addKeyListener()</span> method.
    </p>
    <!--
      In the code snippets, I separate lines with the <br> tag. I would really appreciate it if I didn't need to do this.
    -->
    <p class="brief code">
      JFrame frame = new JFrame("Project");<br />
      KeyChecker kc = new KeyChecker();<br />
      frame.setBounds(250, 250, 500, 500);<br />
      frame.setVisible(true);<br />
      frame.addKeyListener(kc); // No inline overriding needed
    </p>
    <p class="brief">
      Here, we create a <span class="code">JFrame</span> and assign the <span class="code">KeyChecker</span> to it.
      Now, whenever we press a button with the frame highlighted, inputs will be received by the <span class="code">JFrame</span> 
      and sent to the <span class="code">KeyChecker</span>. To minimalize input receiving oversights, I will add other
      "adapters" to the frame to listen to it for anything that may prevent key inputs from passing through.
    </p>
    <p class="brief code">
      JFrame frame = new JFrame("Project");<br />
      KeyChecker kc = new KeyChecker();<br />
      // JFrame init...<br />
      frame.addComponentListener(new ComponentAdapter() {<br />
      <!--
        If you know a better way to format code without using an unholy amount of &nbsp; entities, please tell me.
        I do not enjoy typing all of this.
      -->
      &nbsp;&nbsp;/*<br />
      &nbsp;&nbsp;&nbsp;&nbsp;KeyChecker's cache will be cleared if the JFrame is moved or resized.<br />
      &nbsp;&nbsp;&nbsp;&nbsp;If this is not done, then key presses will not be detected, but neither<br />
      &nbsp;&nbsp;&nbsp;&nbsp;will key releases. This will cause the project to think that a key is<br />
      &nbsp;&nbsp;&nbsp;&nbsp;continuously being pressed even when it is not.<br />
      &nbsp;&nbsp;*/<br />
      &nbsp;&nbsp;@Override<br />
      &nbsp;&nbsp;public void componentMoved(ComponentEvent e) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;kc.clear();<br />
      &nbsp;&nbsp;}<br />
      &nbsp;&nbsp;@Override<br />
      &nbsp;&nbsp;pulic void componentResized(ComponentEvent e) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;kc.clear();<br />
      &nbsp;&nbsp;}<br />
      });<br />
      frame.addWindowFocusListener(new WindowAdapter() {<br />
      &nbsp;&nbsp;@Override<br />
      &nbsp;&nbsp;public void windowLostFocus(WindowEvent e) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;kc.clear();<br />
      &nbsp;&nbsp;}<br />
      });<br />
      frame.addKeyListener(kc);
    </p>
    <p class="brief">
      Now that the frame has its measures in place, we can use the <span class="code">KeyChecker</span> as we
      please. Here is the typical usage for it.
    </p>
    <p class="brief code">
      JFrame frame = new JFrame("Project");<br />
      KeyChecker kc = new KeyChecker();<br />
      // ...<br />
      while (true) {<br />
      &nbsp;&nbsp;if (kc.pressing(KeyEvent.VK_LEFT))<br />
      &nbsp;&nbsp;&nbsp;&nbsp;System.out.println("Going left");<br />
      &nbsp;&nbsp;if (kc.pressing(KeyEvent.VK_RIGHT))<br />
      &nbsp;&nbsp;&nbsp;&nbsp;System.out.println("Going right");<br />
      &nbsp;&nbsp;sleep(1);<br />
      }
    </p>
    <p class="brief">
      This snippet would check for if the user is pressing the left arrow key or the right arrow key every
      millisecond. If one or both are pressed, the project would output the corrisponding direction.
      Also, sleeping (temporarily halting the main thread) is done by using
      <span class="code">try {TimeUnit.MILLISECONDS.sleep(ms)} catch (InterruptedException e) {}</span>.
      No, don't use <span class="code">Thread.sleep(ms)</span>; it's much less reliable.
      Anyways, here is another use of <span class="code">KeyChecker</span>.
    </p>
    <p class="brief code">
      // ...<br />
      JLabel label = new JLabel("Press ENTER to continue...");<br />
      frame.add(label, BorderLayout.SOUTH);<br />
      while (!kc.pressing(KeyEvent.VK_ENTER)) {}<br />
      frame.remove(label);<br />
      // ...
    </p>
    <p class="brief">
      This program waits for the user to press the Enter key. The thread traps itself in a <span class="code">while</span>
      loop until the <span class="code">KeyChecker</span> says that the user is indeed pressing the Enter key. Similarily,
      you can do this too:
    </p>
    <p class="brief code">
      // ...<br />
      while (kc.getPressedKeys().size() == 0) {}<br />
      frame.remove(label);<br />
      // ...<br />
    </p>
    <p class="brief">
      This snippet shows how to detect <u>any</u> key input from the user. The <span class="code">getPressedKeys()</span>
      method returns a copy of the <span class="code">ArrayList</span> the <span class="code">KeyChecker</span> uses to
      store its pressed keys. One more example, to check that keys have been pressed in a particular order:
    </p>
    <p class="brief code">
      // ...<br />
      int[] order = {<br />
      &nbsp;&nbsp;KeyEvent.VK_ONE,<br />
      &nbsp;&nbsp;KeyEvent.VK_TWO,<br />
      &nbsp;&nbsp;KeyEvent.VK_THREE<br />
      };<br />
      if (kc.getPressedKeys() == order)<br />
      &nbsp;&nbsp;System.out.println("You pressed 1, 2, then 3 without releasing anything");<br />
      if (kc.pressing(order))<br />
      &nbsp;&nbsp;System.out.println("You are pressing 1, 2, and 3");<br />
      // ...
    </p>
    <p class="brief">
      This snippet shows both how to detect keys being pressed (without being released) in a specific order, or simply how to
      detect multiple key presses at once. The <span class="code">pressed()</span> method also takes arrays. The method will
      instead return <span class="code">true</span> if <i>all</i> of the keys in the array are pressed.
    </p>
    <h3>Contents</h3>
    <p class="brief">
      Here are the contents of the <span class="code">KeyChecker</span> class. It has no constructors, four custom methods,
      and two overridden methods.
    </p>
    <p class="brief code">
      package project.base;<br />
      import java.awt.event.KeyAdapter;<br />
      import java.awt.event.KeyEvent;<br />
      import java.util.ArrayList;<br />
      public class KeyChecker extends KeyAdapter {<br />
      &nbsp;&nbsp;private ArrayList&lt;Integer&gt; keys = new ArrayList&lt;Integer&gt;();<br />
      &nbsp;&nbsp;public boolean pressed(int k) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;return keys.contains(k);<br />
      &nbsp;&nbsp;}<br />
      &nbsp;&nbsp;public boolean pressed(int[] k) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;for (int i = 0; i < k.length; i++) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!keys.contains(k[i])) {return false;}<br />
      &nbsp;&nbsp;&nbsp;&nbsp;}<br />
      &nbsp;&nbsp;&nbsp;&nbsp;return true;<br />
      &nbsp;&nbsp;}<br />
      &nbsp;&nbsp;public ArrayList&lt;Integer&gt; getPressedKeys() {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;return keys.clone();<br />
      &nbsp;&nbsp;}<br />
      &nbsp;&nbsp;public void clear() {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;this.keys = new ArrayList&lt;Integer&gt;();<br />
      &nbsp;&nbsp;}<br />
      &nbsp;&nbsp;@Override<br />
      &nbsp;&nbsp;public void keyPressed(KeyEvent e) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;if (!keys.contains(e.getKeyCode())) {keys.add(e.getKeyCode());}<br />
      &nbsp;&nbsp;}<br />
      &nbsp;&nbsp;@Override<br />
      &nbsp;&nbsp;public void keyReleased(KeyEvent e) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;try {keys.remove(e.getKeyCode());} catch (IndexOutOfBoundsException ex) {}<br />
      &nbsp;&nbsp;}<br />
      }
    </p>
    <h3>Test Question</h3>
    <p>Complete the object initiation.</p>
    <p class="test-question code">
      JFrame frame = new JFrame("Project");
    </p>
    <textarea class="test-question code" id="test-question-code-1" spellcheck="false">// Initialize KeyChecker called 'kc'</textarea>
    <p class="test-question code">
      frame.setBounds(250, 250, 500, 500);<br />
      frame.setVisible(true);
    </p>
    <textarea class="test-question code" id="test-question-code-2" spellcheck="false">// Apply kc to frame</textarea>
    <p class="test-question code">
      frame.addComponentListener(...);<br />
      frame.addWindowFocusListener(...);
    </p>
    <p>Then, how would you detect the Caps Lock state?</p>
    <input type="radio" name="test-question" value="constant-loop" id="test-question-constant" />
    <label for="test-question-constant">Option #1</label><br />
    <input type="radio" name="test-question" value="check" id="test-question-check" />
    <label for="test-question-check">Option #2</label><br />
    <input type="radio" name="test-question" value="listen-for" id="test-question-listen" />
    <label for="test-question-listen">Option #3</label><br /><br />
    <label>Option #1:</label>
    <p class="test-question code">
      while (true) {<br />
      &nbsp;&nbsp;while (kc.pressing(VK_CAPSLOCK)) {<br />
      &nbsp;&nbsp;&nbsp;&nbsp;capState = !capState;<br />
      &nbsp;&nbsp;}<br />
      }
    </p>
    <label>Option #2:</label>
    <p class="test-question code">
      boolean capState = false;<br />
      while (true) {<br />
      &nbsp;&nbsp;while (!kc.pressing(KeyEvent.VK_CAPS_LOCK)) {}<br />
      &nbsp;&nbsp;capState = !capState;<br />
      }
    </p>
    <label>Option #3:</label>
    <p class="test-question code">
      kc.listenFor(KeyEvent.VK_CAPS_LOCK);
    </p>
    <button onclick="checkAnswers();">Check Answers</button><br />
    <label id="test-question-result"></label>
  </main>
  <footer>
    <hr />
    <p>&#169; <a href="mailto:xthomson@smail.pembinatrails.ca">Xander Thomson</a>, January 2026</p>
  </footer>
</body>
</html>